{% extends "page.html" %}

{% block subtitle %}{{ theme.title }}{% endblock %}

{% block breadcrumb_content %}
  <li><a href="{{ h.url_for('temalar_sayfasi.index') }}">Temalar</a></li>
  <li class="active">{{ theme.title }}</li>
{% endblock %}

{% block primary_content %}
  <section class="module">
    <div class="module-content">
      <h1 class="page-heading">{{ theme.title }}</h1>
      
      {% if theme.description %}
        <p class="theme-description">{{ theme.description }}</p>
      {% endif %}

      {% if datasets %}
        <div class="dataset-search">
          <form method="get" class="search-form">
            <div class="search-input control-group search-giant">
              <input type="text" 
                     name="q" 
                     value="{{ c.q }}" 
                     placeholder="Veri setlerinde ara..." 
                     class="search">
              <button type="submit" class="btn btn-primary">
                <i class="icon-search"></i>
                Ara
              </button>
            </div>
          </form>
        </div>

        <div class="dataset-list">
          {% for dataset in datasets %}
            <div class="dataset-item">
              <h3 class="dataset-heading">
                <a href="{{ dataset.url }}">{{ dataset.title }}</a>
              </h3>
              {% if dataset.description %}
                <p class="dataset-description">{{ dataset.description }}</p>
              {% endif %}
            </div>
          {% endfor %}
        </div>

        <!-- Fixed pagination section -->
        <div class="pagination-wrapper">
          {% if c.page.page_count > 1 %}
            {{ h.temalar_sayfasi_pager(
                base_url=h.url_for('temalar_sayfasi.read', slug=c.slug),
                page=c.page.page,
                per_page=c.page.items_per_page,
                total=c.page.item_count,
                q=c.q
            ) }}
          {% endif %}
        </div>
      {% else %}
        <div class="empty">
          <h3>Veri seti bulunamadı</h3>
          <p>Bu tema için henüz veri seti bulunmuyor.</p>
        </div>
      {% endif %}
    </div>
  </section>
{% endblock %}

{% block secondary_content %}
  <section class="module module-narrow">
    <h2 class="module-heading">Tema Bilgileri</h2>
    <div class="module-content">
      <dl>
        <dt>Tema Adı</dt>
        <dd>{{ theme.title }}</dd>
        
        {% if theme.dataset_count %}
          <dt>Veri Seti Sayısı</dt>
          <dd>{{ theme.dataset_count }}</dd>
        {% endif %}
      </dl>
    </div>
  </section>
{% endblock %}